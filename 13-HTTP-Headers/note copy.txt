Middleware works between client and route